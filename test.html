<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Tests for Basil</title>
    <script src="chai.js"></script>
    <script src="basil.js"></script>
    <script type="text/javascript">
        setTimeout(function() {
            document.getElementById("debug").innerHTML = "Generated: " + new Date().toLocaleTimeString();
        }, 50);
    </script>

    <style>
        li { list-style: none; }
        li.pass { color: #005500; }
        li.pass:before { content: '✓ '; }
        li.fail { color: #880000; }
        li.fail:before { content: '✗ '; }
        li.not-run { color: #555500; }
        li.not-run:before { content: '∅ '; }
    </style>

    <script src="basil-tests.js"></script>
</head>
<body style="background: #FFFFCC">
<h1>Tests for Basil</h1>

<div id="test-output">

</div>

<hr/>
<div id="debug"/>

</body>

<script type="text/javascript">
    setTimeout(function() {
        var output = document.getElementById("test-output");
        console.log(Basil.results);
        output.innerHTML = printRecursive(Basil.results);

        function printRecursive(results) {
            if (!results.length)
                return '';

            var str = '<ul>';
            results.forEach(function(result, i) {
                str += '<li class="{class}">{name} {children}</li>'
                        .replace('{name}', result.name)
                        .replace('{class}', result.passed === true ? 'pass' : result.passed == false ? 'fail' : 'not-run')
                        .replace('{children}', printRecursive(result.children));
            });
            str += '</ul>';
            return str;
        }
    }, 200);

</script>
</html>